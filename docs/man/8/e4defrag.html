<html lang="en-US">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>e4defrag (8)</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">
<link href="https://fonts.googleapis.com/css2?family=Fira+Mono:wght@400;500;700&amp;display=swap" rel="stylesheet">
<link href="/man/index.css" rel="stylesheet" />
</head>
<body style="overscroll-behavior-x: auto">
<main>
<table class="head">
  <tr>
    <td class="head-ltitle">E4DEFRAG(8)</td>
    <td class="head-vol">System Manager's Manual</td>
    <td class="head-rtitle">E4DEFRAG(8)</td>
  </tr>
</table>
<div class="manual-text">
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<p class="Pp">e4defrag - online defragmenter for ext4 file system</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<p class="Pp"><b>e4defrag</b> [ <b>-c</b> ] [ <b>-v</b> ] <i>target</i> ...</p>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<p class="Pp"><b>e4defrag</b> reduces fragmentation of extent based file. The
    file targeted by <b>e4defrag</b> is created on ext4 file system made with
    &quot;-O extent&quot; option (see <b>mke2fs</b>(8)). The targeted file gets
    more contiguous blocks and improves the file access speed.</p>
<p class="Pp"><i>target</i> is a regular file, a directory, or a device that is
    mounted as ext4 file system. If <i>target</i> is a directory,
    <b>e4defrag</b> reduces fragmentation of all files in it. If <i>target</i>
    is a device, <b>e4defrag</b> gets the mount point of it and reduces
    fragmentation of all files in this mount point.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="OPTIONS"><a class="permalink" href="#OPTIONS">OPTIONS</a></h1>
<dl class="Bl-tag">
  <dt id="c"><a class="permalink" href="#c"><b>-c</b></a></dt>
  <dd>Get a current fragmentation count and an ideal fragmentation count, and
      calculate fragmentation score based on them. By seeing this score, we can
      determine whether we should execute <b>e4defrag</b> to <i>target</i>. When
      used with <b>-v</b> option, the current fragmentation count and the ideal
      fragmentation count are printed for each file.</dd>
</dl>
<dl class="Bl-tag">
  <dt></dt>
  <dd>Also this option outputs the average data size in one extent. If you see
      it, you'll find the file has ideal extents or not. Note that the maximum
      extent size is 131072KB in ext4 file system (if block size is 4KB).</dd>
  <dt></dt>
  <dd>If this option is specified, <i>target</i> is never defragmented.</dd>
</dl>
<dl class="Bl-tag">
  <dt id="v"><a class="permalink" href="#v"><b>-v</b></a></dt>
  <dd>Print error messages and the fragmentation count before and after defrag
      for each file.</dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="NOTES"><a class="permalink" href="#NOTES">NOTES</a></h1>
<p class="Pp"><b>e4defrag</b> does not support swap file, files in lost+found
    directory, and files allocated in indirect blocks. When <i>target</i> is a
    device or a mount point, <b>e4defrag</b> doesn't defragment files in mount
    point of other device.</p>
<p class="Pp">It is safe to run e4defrag on a file while it is actively in use
    by another application. Since the contents of file blocks are copied using
    the page cache, this can result in a performance slowdown to both e4defrag
    and the application due to contention over the system's memory and disk
    bandwidth.</p>
<p class="Pp">If the file system's free space is fragmented, or if there is
    insufficient free space available, e4defrag may not be able to improve the
    file's fragmentation.</p>
<p class="Pp">Non-privileged users can execute <b>e4defrag</b> to their own
    file, but the score is not printed if <b>-c</b> option is specified.
    Therefore, it is desirable to be executed by root user.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="AUTHOR"><a class="permalink" href="#AUTHOR">AUTHOR</a></h1>
<p class="Pp">Written by Akira Fujita &lt;a-fujita@rs.jp.nec.com&gt; and Takashi
    Sato &lt;t-sato@yk.jp.nec.com&gt;.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SEE_ALSO"><a class="permalink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<p class="Pp"><b>mke2fs</b>(8), <b>mount</b>(8).</p>
<p class="Pp"></p>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">May 2009</td>
    <td class="foot-os">e4defrag version 2.0</td>
  </tr>
</table>
</main>
</body>
</html>
