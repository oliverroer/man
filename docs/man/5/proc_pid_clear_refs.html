<html lang="en-US">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>proc_pid_clear_refs (5)</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Geist:wght@100..900&display=swap" rel="stylesheet">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Geist+Mono:wght@100..900&family=Geist:wght@100..900&display=swap" rel="stylesheet">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">
<link href="https://fonts.googleapis.com/css2?family=Fira+Mono:wght@400;500;700&amp;display=swap" rel="stylesheet">
<link href="/man/index.css" rel="stylesheet" />
</head>
<body style="overscroll-behavior-x: auto">
<main>
<table class="head">
  <tr>
    <td class="head-ltitle">proc_pid_clear_refs(5)</td>
    <td class="head-vol">File Formats Manual</td>
    <td class="head-rtitle">proc_pid_clear_refs(5)</td>
  </tr>
</table>
<div class="manual-text">
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<p class="Pp">/proc/pid/clear_refs - reset the PG_Referenced and ACCESSED/YOUNG
    bits</p>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<dl class="Bl-tag">
  <dt><i>/proc/</i>pid<i>/clear_refs</i> (since Linux 2.6.22)</dt>
  <dd></dd>
</dl>
<dl class="Bl-tag">
  <dt></dt>
  <dd>This is a write-only file, writable only by owner of the process.</dd>
  <dt></dt>
  <dd>The following values may be written to the file:</dd>
</dl>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt>1 (since Linux 2.6.22)</dt>
  <dd>Reset the PG_Referenced and ACCESSED/YOUNG bits for all the pages
      associated with the process. (Before Linux 2.6.32, writing any nonzero
      value to this file had this effect.)</dd>
  <dt>2 (since Linux 2.6.32)</dt>
  <dd>Reset the PG_Referenced and ACCESSED/YOUNG bits for all anonymous pages
      associated with the process.</dd>
  <dt>3 (since Linux 2.6.32)</dt>
  <dd>Reset the PG_Referenced and ACCESSED/YOUNG bits for all file-mapped pages
      associated with the process.</dd>
</dl>
</div>
<dl class="Bl-tag">
  <dt></dt>
  <dd>Clearing the PG_Referenced and ACCESSED/YOUNG bits provides a method to
      measure approximately how much memory a process is using. One first
      inspects the values in the &quot;Referenced&quot; fields for the VMAs
      shown in <i>/proc/</i>pid<i>/smaps</i> to get an idea of the memory
      footprint of the process. One then clears the PG_Referenced and
      ACCESSED/YOUNG bits and, after some measured time interval, once again
      inspects the values in the &quot;Referenced&quot; fields to get an idea of
      the change in memory footprint of the process during the measured
      interval. If one is interested only in inspecting the selected mapping
      types, then the value 2 or 3 can be used instead of 1.</dd>
  <dt></dt>
  <dd>Further values can be written to affect different properties:</dd>
</dl>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt>4 (since Linux 3.11)</dt>
  <dd>Clear the soft-dirty bit for all the pages associated with the process.
      This is used (in conjunction with <i>/proc/</i>pid<i>/pagemap</i>) by the
      check-point restore system to discover which pages of a process have been
      dirtied since the file <i>/proc/</i>pid<i>/clear_refs</i> was written
    to.</dd>
  <dt>5 (since Linux 4.0)</dt>
  <dd>Reset the peak resident set size (&quot;high water mark&quot;) to the
      process's current resident set size value.</dd>
</dl>
</div>
<dl class="Bl-tag">
  <dt></dt>
  <dd>Writing any value to <i>/proc/</i>pid<i>/clear_refs</i> other than those
      listed above has no effect.</dd>
  <dt></dt>
  <dd>The <i>/proc/</i>pid<i>/clear_refs</i> file is present only if the
      <b>CONFIG_PROC_PAGE_MONITOR</b> kernel configuration option is
    enabled.</dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="SEE_ALSO"><a class="permalink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<p class="Pp"><b>proc</b>(5)</p>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">2023-09-07</td>
    <td class="foot-os">Linux man-pages 6.7</td>
  </tr>
</table>
</main>
</body>
</html>
